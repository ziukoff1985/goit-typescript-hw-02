import { useEffect, useRef } from 'react';
import toast from 'react-hot-toast';

// –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–æ–ø—Å—ñ–≤ –¥–ª—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ ErrorNotification
interface ErrorNotificationProps {
  message?: string; // –û–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–µ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º –±—É–¥–µ 'No results found...')
}

// –ö–æ–º–ø–æ–Ω–µ–Ω—Ç ErrorNotification
// –í—ñ–¥–ø–æ–≤—ñ–¥–∞—î –∑–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É, —è–∫—â–æ –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∑–∞ –∑–∞–ø–∏—Ç–æ–º –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ
// –ü—Ä–∏–π–º–∞—î –ø—Ä–æ–ø—Å:
// - message: –ø–æ—Ç—Ä—ñ–±–µ–Ω –Ω–∞ –≤–∏–ø–∞–¥–æ–∫, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ (–Ω–∞ –º–∞–π–±—É—Ç–Ω—î) –≤—ñ–¥–æ–±—Ä–∞–∂–∞—Ç–∏ —Ä—ñ–∑–Ω—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
// - message –º–æ–∂–µ –±—É—Ç–∏ –∑–º—ñ–Ω–µ–Ω–∏–π –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä—ñ–∑–Ω–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É
const ErrorNotification = ({
  message,
}: ErrorNotificationProps): JSX.Element | null => {
  // –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î useRef –¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Å—Ç–∞–Ω—É, —á–∏ –≤–∂–µ –±—É–ª–æ –ø–æ–∫–∞–∑–∞–Ω–æ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è
  // hasToastShown.current —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É—î—Ç—å—Å—è —è–∫ false
  const hasToastShown = useRef<boolean>(false);

  // useEffect –¥–ª—è –ø–æ–∫–∞–∑—É –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É "No Results" –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑
  useEffect(() => {
    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞, —á–∏ —Ç–æ—Å—Ç —É–∂–µ –ø–æ–∫–∞–∑—É–≤–∞–≤—Å—è
    if (!hasToastShown.current) {
      // –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É "No Results"
      toast.error(
        message || 'No results found. Please try a different query. ü§∑‚Äç‚ôÇÔ∏è'
      );
      // –ó–º—ñ–Ω—é—î–º–æ —Å—Ç–∞–Ω, —â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ—Å—Ç–∞
      hasToastShown.current = true;
    }
  }, [message]); // –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:
  // - –Ø–∫—â–æ –º–∞—Å–∏–≤ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –ø–æ—Ä–æ–∂–Ω—ñ–π "[]", –µ—Ñ–µ–∫—Ç –≤–∏–∫–æ–Ω—É—î—Ç—å—Å—è –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä—É.
  // - –Ø–∫—â–æ –º–∞—Å–∏–≤ –º—ñ—Å—Ç–∏—Ç—å –∑–Ω–∞—á–µ–Ω–Ω—è, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, "[message]", –µ—Ñ–µ–∫—Ç –±—É–¥–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏—Å—è —â–æ—Ä–∞–∑—É, –∫–æ–ª–∏ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ü–µ –∑–Ω–∞—á–µ–Ω–Ω—è.

  return null; // –ö–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î –∂–æ–¥–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É DOM
};

export default ErrorNotification;
