import axios from 'axios';

// –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ç–∏–ø—ñ–∑–∞—Ü—ñ—ó –¥–ª—è —Ñ—É–Ω–∫—Ü—ñ—ó –∑–∞–ø–∏—Ç—É fetchImages (–∑ —Ñ–∞–π–ª—É ./types)
import { FetchImagesResponse } from './types';

// –û–≥–æ–ª–æ—à—É—î–º–æ –±–∞–∑–æ–≤—É URL-–∞–¥—Ä–µ—Å—É –¥–ª—è –∑–∞–ø–∏—Ç—É –¥–æ API Unsplash
const BASE_URL = 'https://api.unsplash.com/search/photos';

// –û–≥–æ–ª–æ—à—É—î–º–æ –∫–ª—é—á API, —è–∫–∏–π –±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—è –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—É
// –¶–µ –æ—Å–æ–±–∏—Å—Ç–∏–π –∫–ª—é—á –¥–æ—Å—Ç—É–ø—É –¥–æ API Unsplash
const API_KEY = 'WEdozSbeL3sXHgKKf2QSFIABrvu5qfELDXJLSJNUh8Q';

// –°—Ç–≤–æ—Ä—é—î–º–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –∑–æ–±—Ä–∞–∂–µ–Ω—å –∑ API Unsplash
// –ü—Ä–∏–π–º–∞—î —Ç—Ä–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏:
// - query: —Ä—è–¥–æ–∫ –ø–æ—à—É–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É, —è–∫–∏–π –≤–≤—ñ–≤ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á
// - page: –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ –¥–ª—è –ø–∞–≥—ñ–Ω–∞—Ü—ñ—ó
// - perPage: –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω—å –Ω–∞ –æ–¥–Ω—É —Å—Ç–æ—Ä—ñ–Ω–∫—É, –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 12
export const fetchImages = async (
  query: string, // üîé –†—è–¥–æ–∫ –ø–æ—à—É–∫–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É
  page: number, // üìÑ –ù–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
  perPage = 12 // üî¢ –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 12)
): Promise<FetchImagesResponse> => {
  // –í–∏–∫–æ–Ω—É—î–º–æ GET-–∑–∞–ø–∏—Ç –¥–æ API Unsplash
  const response = await axios.get(BASE_URL, {
    // –ü–∞—Ä–∞–º–µ—Ç—Ä–∏ –∑–∞–ø–∏—Ç—É: –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç, –Ω–æ–º–µ—Ä —Å—Ç–æ—Ä—ñ–Ω–∫–∏, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–æ–±—Ä–∞–∂–µ–Ω—å –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω—Ü—ñ
    params: { query, page, per_page: perPage },
    // –ó–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ API-–∫–ª—é—á
    headers: {
      // API-–∫–ª—é—á –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—É
      Authorization: `Client-ID ${API_KEY}`,
    },
  });

  console.log(response);

  return response.data; // –ü–æ–≤–µ—Ä—Ç–∞—î–º–æ –¥–∞–Ω—ñ, –æ—Ç—Ä–∏–º–∞–Ω—ñ –≤—ñ–¥ API
};
